<% if (message) { %>
  <style>
    #successMessage {
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    #successMessage.show {
      opacity: 1;
    }
    #successMessage.fade-out {
      opacity: 0;
    }
  </style>
  <div id="successMessage" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
    <div class="bg-white rounded-xl p-10 w-[90%] max-w-md text-center relative">
      <button onclick="removeMessage()" class="absolute top-3 left-3 bg-sky-950 w-6 h-6 flex justify-center text-white items-center p-1 rounded-md font-medium hover:font-bold text-md">Ã—</button>
      <img src="/static/dashboard/images/success.png" alt="Success" class="mx-auto mb-4 w-50" >
      <p class="text-2xl font-bold"><%= message %></p>
    </div>
  </div>

  <script>
    const successMessage = document.getElementById('successMessage');

    // Add the 'show' class on next tick to trigger fade-in
    requestAnimationFrame(() => {
      successMessage.classList.add('show');
    });
    function removeMessage() {
      const msg = document.getElementById('successMessage');
      if (msg) msg.remove();
      clearMessageFromURL();
    }

    function clearMessageFromURL() {
      const url = new URL(window.location);
      url.searchParams.delete('message');
      window.history.replaceState({}, document.title, url.toString());
    }

    setTimeout(() => {
      removeMessage();
    }, 5000);
  </script>
<% } %>
