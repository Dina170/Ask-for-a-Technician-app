<div class="rounded-tl-3xl shadow-md border p-5 h-full">
  <div class="mb-6 px-6">
    <h1 class="text-xl font-bold my-1 text-right">
      <%= "عرض بيانات الفني" %>
    </h1>
    <p class="text-gray-600 text-right">
      <a href="/dashboard/technicians" class="hover:text-sky-950 hover:font-medium">الفنيين</a> &gt; عرض الفني
    </p>
  </div>

  <div class="bg-white rounded-lg px-6 py-2">

    <!-- Job Name -->
    <div class="mb-6">
      <label class="block text-right mb-2 font-medium">المهنة</label>
      <input type="text" disabled readonly value="<%= technician.jobName?.name || 'غير محددة' %>"
        class="w-full p-2 border rounded-md text-right bg-gray-50">
    </div>

    <!-- Neighborhoods -->
    <div class="mb-6">
      <label class="block text-right mb-2 font-medium">الأحياء</label>
      <textarea disabled readonly
        class="w-full overflow-hidden p-2 border rounded-md text-right bg-gray-50 resize-none">
<%= technician.neighborhoodNames?.length > 0 
  ? technician.neighborhoodNames.map(n => n.name).join("\n") 
  : 'غير محددة' %>
      </textarea>
    </div>
    <!-- Main Title -->
    <div class="mb-6">
      <label class="block text-right mb-2 required font-medium">عنوان رئيسي</label>
      <input type="text" name="mainTitle" readonly disabled
        class="w-full p-2 border rounded-md text-right bg-gray-50 focus:outline-blue-950 focus:outline-1"
        value="<%= technician.mainTitle %>">
    </div>
    <!-- Phone -->
    <div class="mb-6">
      <label class="block text-right mb-2 font-medium">رقم الفون</label>
      <input type="tel" name="phoneNumber" readonly disabled
        class="w-full p-2 border rounded-md text-right focus:outline-blue-950 focus:outline-1"
        value="<%= technician.phoneNumber  %>">
    </div>
    <!-- Technician Photo -->
    <% if (technician.jobTechnicianPhoto) { %>
      <div class="mb-10">
        <label class="block text-right mb-4 font-medium">صورة الفني</label>
        <div class="flex justify-center px-4 w-full rounded-md">
          <div class="w-40 h-40 rounded-md bg-gray-100 flex items-center justify-center">
            <img class="w-full h-full object-cover rounded-md" src="<%= technician.jobTechnicianPhoto %>"
              alt="<%= technician.mainTitle %>">
          </div>
        </div>
      </div>
      <% } %>



        <!-- Description -->
        <div class="mb-6">
          <label class="block text-right mb-2 font-medium">الوصف</label>
          <div id="descriptionEditor" dir="rtl" class="quill-container border rounded-md"></div>
        </div>


        <!-- Actions -->
        <div class="flex flex-col sm:flex-row justify-between gap-4 mt-10">
          <!-- Back Button -->
          <a href="/dashboard/technicians"
            class="bg-white border border-gray-900 hover:bg-gray-700 hover:text-white text-gray-800 font-bold py-3 px-4 rounded-md w-full text-center">
            <i class="fa-solid fa-arrow-left ms-2"></i>رجوع
          </a>
        </div>
  </div>
</div>
<!-- Quill CSS & JS -->
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet" />
<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
<script>
  const textarea = document.querySelector('textarea[readonly]');
  if (textarea) {
    textarea.style.height = 'auto';
    textarea.style.height = textarea.scrollHeight + 'px';
  }
  // Initialize Quill editor
  const initQuillEditor = () => {
    const toolbarOptions = [
      ['bold', 'italic', 'underline'],
      [{ 'color': [] }, { 'background': [] }],
      [{ align: [] }],
      [{ list: 'ordered' }, { list: 'bullet' }],
      [{ 'direction': 'rtl' }],
      ['clean']
    ];

    try {
      const editor = new Quill('#descriptionEditor', {
        theme: 'snow',
        readOnly: true,
        modules: { toolbar: toolbarOptions }
      });

      editor.root.innerHTML = <%- JSON.stringify(technician.description || '') %>;


      return editor;
    } catch (error) {
      console.error('Error initializing Quill:', error);
      return null;
    }
  };

  // Initialize global variables
  const descriptionEditor = initQuillEditor();

</script>
<style>
  .ql-editor {
    direction: rtl !important;
    text-align: right !important;
    background: #f7f5f5ef;
  }
   /* ===== Unordered list (•) ===== */
  .ql-editor ul li {
    position: relative;
    margin-bottom: 0.3rem;
    padding-inline-start: 1.2rem;
  }

  .ql-editor ul li::before {
    content: "•";
    position: absolute;
    top: 0;
    font-size: 1rem;
    color: #000;
    line-height: 1;
  }

  .ql-editor ul li::before {
    right: 0;
  }

  .ql-editor ul li::before {
    left: 0;
  }

  /* ===== Ordered list  ===== */
  .ql-editor ol li {
    position: relative;
    margin-bottom: 0.3rem;
    counter-increment: quill-counter;
    padding-inline-start: 2rem;
  }

  .ql-editor ol {
    counter-reset: quill-counter;
  }


  .ql-editor ol li::before {
    content: counter(quill-counter) ".";
    position: absolute;
    top: 0;
    font-size: 1rem;
    color: #000;
    line-height: 1;
  }

  .ql-editor ol li::before {
    right: 0;
  }
</style>